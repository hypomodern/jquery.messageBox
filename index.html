<!DOCTYPE html>
<html>
<head>
  <title>MessageBox: a JQuery messenger plugin</title>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
  <script src="jquery.closure.js"></script>
  <script src="underscore.js" type="text/javascript"></script>
  <script src="mustache.js" type="text/javascript"></script>
  <script src="jquery.messageBox.js"></script>
  <link rel="stylesheet" href="styles.css" type="text/css" media="screen">

<script>
// the message boxes themselves:
jQuery(function() {
  function soupcatcher(template) {
    return function(data) {
      return Mustache.to_html(template, data);
    }
  }

  jQuery("#footer_messages").messageBox({
    messageTypes: [ 'debug', 'info', 'warn', 'error' ],
    template: soupcatcher("<li>Heyaz, I got a message-type thingy: {{messageType}}. It had a number, too: {{a_number}}</li>"),
  });
  jQuery("#mfd_messages").messageBox({
    messageTypes: [ 'warn', 'error' ],
    template: _.template("<li>Ach, mein <span class=\"negative\"><%= messageType %></span>! The Magic Number was <span class=\"magic\"><%= a_number %></span>.</li>"),
  });
});

// event handling on the buttons that will trigger the messages
jQuery(".button").live("click", function(e) {
  var $this = jQuery(this);
  $this.trigger({
    type: "message:sent",
    messageType: this.id,
    messageData: { a_number: Math.round(Math.random() * 100) }
  });
  return false;
});
</script>
</head>
<body>

<div id="wrapper">
  <div id="mfd" class="scrollable">
    <h5>srs msgs</h5>

    <ul id="mfd_messages">
    </ul>
  </div>

  <div id="main">
    <h1>Welcome!</h1>

    <p>This here is a quick demo of the jquery.messageBox plugin. On this page we have two elements bound to the message pipeline. On your right you should see an "MFD" which will should only print the warnings and errors. Below is a generalized hopper that should get everything. Events of a variety of types and severities can be generated by mashing the buttons below at your leisure.</p>

    <div class="buttons">
      <a href="#" id="debug" class="button positive">Debug!</a>
      <a href="#" id="info" class="button">Info!</a>
      <a href="#" id="warn" class="button notice">Warn!</a>
      <a href="#" id="error" class="button negative">Error!</a>
    </div>
  </div>
</div>

<div id="footer" class="scrollable">
  <h5>all msgs</h5>
  <ul id="footer_messages">

  </ul>
</div>
</body>
</html>